# VLO docker compose configuration overlay for production (and beta)
version: '2'
services:
  vlo_solr:
    volumes:
      - /srv/solr-data:${SOLR_DATA_HOME}
      - /srv/solr-export:${SOLR_EXPORT_DIR}
  vlo_web:
    environment:
      - VLO_MAPPING_DEFINITIONS_DIST_URL=https://github.com/clarin-eric/VLO-mapping/archive/beta.tar.gz
      - VLO_DOCKER_PUBLIC_HOME_URL=https://beta-vlo.clarin.eu
      - VLO_DOCKER_DATAROOTS_FILE=dataroots-beta.xml
      - VLO_DOCKER_FILE_PROCESSING_THREADS=-1
      - VLO_DOCKER_SOLR_THREADS=2
      - VLO_DOCKER_DELETE_ALL_FIRST=false
      - VLO_DOCKER_MAX_DAYS_IN_SOLR=7
      - STATSD_PREFIX=vlo.beta
    volumes:
      - /srv/vlo-data:${METADATA_DIR}
      - /srv/vlo-statsd:/opt/statsd
      - /srv/vlo-sitemap:/opt/sitemap
